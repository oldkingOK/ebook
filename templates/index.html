<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>eBook++</title>
    <style>
        body {
            cursor: url('/static/cursor/1.png'), auto;
        }
        .arrow{
            width: 0;
            height: 0;
            border-right: 18px solid #862121;
            border-top: 18px solid transparent;
            border-bottom: 18px solid transparent;
            position: absolute;
            right: 0;
            top: 50%;
            display: block;
        }
        .search{
            width: 500px;
            height: 150px;
            position: fixed;
            bottom: 5px;
            right: 20px;
            z-index: 10;
        }
        #up{
            width: 30px;
            height: 30px;
            position: fixed;
            bottom: 20%;
            right: 15%;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .serf{
            height: 100px;
            width: 320px;
            margin: 36px 0 0 150px;
            border: #000000 solid 2px;
            box-sizing: border-box;
            padding-left: 50px;
            background-color: #cccccc;
            display: none;
        }
 
        .search:hover .arrow{
            border-right: 18px solid #ec5b0c;
        }
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        html{
            overflow: hidden;
        }
        .background-container {
            background-attachment: fixed;
            position: relative;
            height: 100%;
            background-image: url('/static/YuukaNoa.png'), url('/static/OIP.jpg'); /* 左右图片的 URL */
            background-size: auto 100%, auto 100%; /* 设置两张背景图片的尺寸，宽度为原始宽度，高度为100% */
            background-position: left top, right top; /* 设置两张背景图片的位置 */
            background-repeat: no-repeat; /* 禁止背景图片重复 */
        }
        .content {
            overflow: scroll;
            position: absolute;
            top: 0;
            height: 100%;
            left: 50%; /* 将内容居中 */
            transform: translateX(-50%); /* 水平居中 */
            width: 80%; /* 假设内容占据的宽度为整个页面的80% */
            text-align: center; /* 文字居中 */
            color: #191616; /* 文字颜色 */
            padding: 20px; /* 内边距 */
            background-color: rgba(224, 224, 224, 0.4); /* 背景色，透明度为50% */
        }
        .icon:hover path{
            fill: #1296db;
        }
    </style>
    <script src="/static/scripts/http_unpkg.com_oh-my-live2d@latest.js"></script>
    <script src="/static/scripts/jquery.min.js"></script>
    <script src="/static/scripts/mouse.min.js"></script>
</head>
<body>

<div class="background-container">
    <div class="search">
        <div class="arrow"></div>
        <div class="serf" >
            <h2 style="margin-bottom: 5px">Search Page</h2>
            <div class="ser">
                <form id="searchForm"  method="GET">
                    <input type="text" id="searchInput" name="query" placeholder="Enter your search term">
                    <button type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
    <div id="up" >
        <a href="#top">
            <svg t="1715667357372" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1176" width="20" height="20" xmlns:xlink="http://www.w3.org/1999/xlink">
                <path d="M724.992 939.068235a60.235294 60.235294 0 0 1-60.054588 59.934118H303.104a59.994353 59.994353 0 0 1-60.054588-59.994353V517.059765H62.042353c-66.258824 0-81.92-38.128941-34.816-85.293177L441.524706 17.468235a60.416 60.416 0 0 1 85.052235 0l414.298353 414.418824c47.104 46.983529 31.503059 85.232941-34.93647 85.232941h-180.946824v421.888z" fill="#d98b2f" p-id="1177"></path>
            </svg>
        </a>
    </div>
    <div class="content">
        <div id="top"></div>
        <div class="ok_content">
            <h1>E-Book</h1>    
        </div>
    </div>
</div>

<script type="text/javascript">
    // 光标 URL 数组
    var cursorUrls = [
        "/static/cursor/1.png",
        "/static/cursor/2.png",
        "/static/cursor/3.png",
        "/static/cursor/4.png",
        "/static/cursor/5.png",
        "/static/cursor/6.png",
        "/static/cursor/7.png",
        "/static/cursor/8.png",
        "/static/cursor/9.png"
    ];
    var currentIndex = 0;

    // 点击事件处理函数
    function changeCursor() {
        // 获取下一个光标 URL
        var nextCursorUrl = cursorUrls[currentIndex];
        // 更新 CSS
        document.body.style.cursor = 'url(' + nextCursorUrl + '), auto';
        // 更新当前索引
        currentIndex = (currentIndex + 1) % cursorUrls.length;
    }

    // 为 body 添加点击事件监听器
    document.body.addEventListener('click', changeCursor);
</script>

<script type="text/javascript">
    $.shuicheMouse({
        type: 11,
        color: "rgba(187,67,128,1)"
    })
</script>

    <script type="text/javascript">
        (function($){
            $.fn.snow = function(options){
                var $flake = $('<div id="snowbox" />').css({'position': 'absolute','z-index':'9999', 'top': '-50px', 'cursor': 'pointer'}).html('❄'),
                    documentHeight  = $(document).height(),
                    documentWidth   = $(document).width(),
                    defaults = {
                        minSize     : 10,
                        maxSize     : 20,
                        newOn       : 1000,
                        flakeColor  : "#e0c0ce" /* 此处可以定义雪花颜色，若要白色可以改为#FFFFFF */
                    },
                    options = $.extend({}, defaults, options);
                var interval= setInterval( function(){
                    var startPositionLeft = Math.random() * documentWidth - 100,
                        startOpacity = 0.5 + Math.random(),
                        sizeFlake = options.minSize + Math.random() * options.maxSize,
                        endPositionTop = documentHeight - 200,
                        endPositionLeft = startPositionLeft - 500 + Math.random() * 500,
                        durationFall = documentHeight * 10 + Math.random() * 5000;
                    $flake.clone().appendTo('body').css({
                        left: startPositionLeft,
                        opacity: startOpacity,
                        'font-size': sizeFlake,
                        color: options.flakeColor
                    }).animate({
                        top: endPositionTop,
                        left: endPositionLeft,
                        opacity: 0.2
                    },durationFall,'linear',function(){
                        $(this).remove()
                    });
                }, options.newOn);
            };
        })(jQuery);
        $(function(){
            $.fn.snow({
                minSize: 5, /* 定义雪花最小尺寸 */
                maxSize: 80,/* 定义雪花最大尺寸 */
                newOn: 200  /* 定义密集程度，数字越小越密集 */
            });
        });
    /* 鼠标特效 */
    var a_idx = 0;
    jQuery(document).ready(function($) {
        $("body").click(function(e) {
            var a = new Array("欲买桂花同载酒","轻盈的风","浮世景色百千年依旧","愿你今晚得享安睡","请随我一同避雨吧","嗯？天晴了吗？","烟花易逝","拾花鸟之一趣","照月风之长路","雪霁银装素","桔高映琼枝");
            var $i = $("<span></span>").text(a[a_idx]);
            a_idx = (a_idx + 1) % a.length;
            var x = e.pageX,
                y = e.pageY;
            $i.css({
                "z-index": 30,
                "top": y - 20,
                "left": x,
                "position": "absolute",
                "font-weight": "bold",
                "color": "rgb("+~~(255*Math.random())+","+~~(255*Math.random())+","+~~(255*Math.random())+")"
            });
            $("body").append($i);
            $i.animate({
                    "top": y - 180,
                    "opacity": 0
                },
                3000,
                function() {
                    $i.remove();
                });
        });
    });
</script>
<script>
    var upImage = document.getElementById('upImage');

    // 鼠标悬停时更改图像源
    document.getElementById('up').addEventListener('mouseover', function() {
        upImage.src = '../static/upload_hover.svg';
    });

    // 鼠标离开时恢复原始图像源
    document.getElementById('up').addEventListener('mouseout', function() {
        upImage.src = '../static/upload.svg';
    });

    document.getElementById("searchForm").addEventListener("submit", function(event) {
        // 阻止默认的表单提交行为
        event.preventDefault();
        // 获取搜索框中的输入值
        var searchTerm = document.getElementById("searchInput").value;
        // 如果输入值不为空
        if (searchTerm.trim() !== "") {
            // 构建跳转 URL，并将搜索词作为参数传递
            $.get('/?name=' + encodeURIComponent(searchTerm), function(data) {
                // 将 HTML 字符串转换为 jQuery 对象
                var $data = $(data);
                // 找到所有的 img 元素，并替换它们
                $data.find('img').replaceWith('<img height=128 width=128 src="/static/aniyah_img.png" alt="aniya_eat">');
                // 将修改后的 HTML 插入到页面中
                $('.ok_content').html($data);
            });
        }
    });

    var searchElement = document.querySelector('.search');
    var serfDiv = document.querySelector(".serf");
    var isComposing = false;
   
    // 添加鼠标进入事件监听器
    searchElement.addEventListener('mouseenter', function() {
        serfDiv.style.display = 'block'; // 当鼠标进入时，设置 .serf 的 display 为 block
    });

    // 添加鼠标离开事件监听器
    searchElement.addEventListener('mouseleave', function() {
        // 检查 searchElement 或其内部的任何元素是否是活动元素
        if (!(searchElement.contains(document.activeElement))) {
            serfDiv.style.display = 'none'; // 当鼠标离开且元素没有焦点时，设置 display 为 none
        }
    });

    // 添加点击事件监听器到整个文档
    document.addEventListener('click', function(event) {
        // 检查点击的元素是否是 searchElement 或其内部的任何元素
        if (!searchElement.contains(event.target)) {
            serfDiv.style.display = 'none'; // 当点击的元素不是 searchElement 或其内部的任何元素时，设置 display 为 none
        }
    });

    searchElement.addEventListener("compositionstart", function(event) {
        isComposing = true;
        serfDiv.style.display = "block";
    });
    searchElement.addEventListener("compositionend", function(event) {
        isComposing = false;
    });
</script>

<script>
    OML2D.loadOml2d({
        menus: {
            disable: true
        },
        tips: (_, currentIndex) => {
            return {
                copyTips: {
                    message: ['阿尼亚喜欢这个~']
                },
                welcomeTips: {
                    message: {
                        afternoon: "奥力给给，奥力给给",
                        daybreak: "奥力给给，奥力给给",
                        dusk: "奥力给给，奥力给给",
                        lateNight: "奥力给给，奥力给给",
                        morning: "奥力给给，奥力给给",
                        night: "奥力给给，奥力给给",
                        noon: "奥力给给，奥力给给",
                        weeHours: "奥力给给，奥力给给",
                    }
                },
                idleTips: {
                    message: ["阿尼亚喜欢吃花生", "哇酷哇酷！", "阿尼亚哈哈一拿酷得撒比洗", "奥力给给，奥力给给", "斯邦邦"]
                }
            };
        },
        models: [
            {
                path: '/static/ANIYA-walk/ANIYA.model3.json',
                position: [60, 60],
                scale: 0.06,
                stageStyle: {
                    height: 450
                }
            }
        ]
    });
</script>

</body>
</html>